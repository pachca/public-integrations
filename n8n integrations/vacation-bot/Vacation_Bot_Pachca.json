{
    "name": "–ë–æ—Ç_–æ—Ç–ø—É—Å–∫–æ–≤_–ü–∞—á–∫–∞",
    "nodes": [
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "12345678",
                "options": {}
            },
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 2.1,
            "position": [
                -1296,
                0
            ],
            "id": "12345678",
            "name": "Webhook",
            "webhookId": "12345678"
        },
        {
            "parameters": {
                "rules": {
                    "values": [
                        {
                            "conditions": {
                                "options": {
                                    "caseSensitive": true,
                                    "leftValue": "",
                                    "typeValidation": "strict",
                                    "version": 2
                                },
                                "conditions": [
                                    {
                                        "leftValue": "={{ $json.body.type === \"message\" && $json.body.event === \"new\" && $json.body.content === \"/start\" }}",
                                        "rightValue": "",
                                        "operator": {
                                            "type": "boolean",
                                            "operation": "true",
                                            "singleValue": true
                                        },
                                        "id": "12345678"
                                    }
                                ],
                                "combinator": "and"
                            },
                            "renameOutput": true,
                            "outputKey": "Start Command"
                        },
                        {
                            "conditions": {
                                "options": {
                                    "caseSensitive": true,
                                    "leftValue": "",
                                    "typeValidation": "strict",
                                    "version": 2
                                },
                                "conditions": [
                                    {
                                        "id": "12345678",
                                        "leftValue": "={{ $json.body.type === \"button\" && $json.body.event === \"click\" && $json.body.data === \"vacation_request\" }}",
                                        "rightValue": "",
                                        "operator": {
                                            "type": "boolean",
                                            "operation": "true",
                                            "singleValue": true
                                        }
                                    }
                                ],
                                "combinator": "and"
                            },
                            "renameOutput": true,
                            "outputKey": "Open Form"
                        },
                        {
                            "conditions": {
                                "options": {
                                    "caseSensitive": true,
                                    "leftValue": "",
                                    "typeValidation": "strict",
                                    "version": 2
                                },
                                "conditions": [
                                    {
                                        "id": "12345678",
                                        "leftValue": "={{ $json.body.type === \"view\" && $json.body.event === \"submit\" && $json.body.callback_id === \"vacation_form\" }}",
                                        "rightValue": "",
                                        "operator": {
                                            "type": "boolean",
                                            "operation": "true",
                                            "singleValue": true
                                        }
                                    }
                                ],
                                "combinator": "and"
                            },
                            "renameOutput": true,
                            "outputKey": "Form Submitted"
                        },
                        {
                            "conditions": {
                                "options": {
                                    "caseSensitive": true,
                                    "leftValue": "",
                                    "typeValidation": "strict",
                                    "version": 2
                                },
                                "conditions": [
                                    {
                                        "id": "12345678",
                                        "leftValue": "={{ $json.body.type === \"button\" && $json.body.event === \"click\" && ($json.body.data.includes(\"approve_\") || $json.body.data.includes(\"reject_\") || $json.body.data.includes(\"clarify_\")) }}",
                                        "rightValue": "",
                                        "operator": {
                                            "type": "boolean",
                                            "operation": "true",
                                            "singleValue": true
                                        }
                                    }
                                ],
                                "combinator": "and"
                            },
                            "renameOutput": true,
                            "outputKey": "HR Action"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.switch",
            "typeVersion": 3.2,
            "position": [
                -1072,
                -32
            ],
            "id": "12345678",
            "name": "Switch"
        },
        {
            "parameters": {
                "entityId": "={{ $json.chat_id }}",
                "content": "=‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!\n\n**–ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏:** {{ $node[\"Parse Form Data\"].json.request_id }}\n**–î–∞—Ç—ã:** {{ $node[\"Parse Form Data\"].json.date_start }} - {{ $node[\"Parse Form Data\"].json.date_end }}\n**–¢–∏–ø:** {{ $node[\"Parse Form Data\"].json.vacation_type }}\n**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** {{ $node[\"Parse Form Data\"].json.availability }}\n**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** {{ $node[\"Parse Form Data\"].json.comment }}\n\n–í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ HR –ø—Ä–∏–º–µ—Ç —Ä–µ—à–µ–Ω–∏–µ."
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                -176,
                96
            ],
            "id": "12345678",
            "name": "Confirm to User",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "jsCode": "// –î–∞–Ω–Ω—ã–µ –∏–∑ Switch (—Ñ–æ—Ä–º–∞)\nconst webhookData = $input.item.json.body;\nconst formData = webhookData.data;\nconst userId = webhookData.user_id;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º start_message_id –∏–∑ private_metadata (–ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ)\nconst startMessageId = webhookData.private_metadata;\n\n// –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö...\nconst typeMap = {\n  'annual': 'üí∞ –ï–∂–µ–≥–æ–¥–Ω—ã–π –æ–ø–ª–∞—á–∏–≤–∞–µ–º—ã–π –æ—Ç–ø—É—Å–∫',\n  'unpaid': 'üö´ –ë–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã',\n  'parental': 'ü§∞üèº –ü–æ —É—Ö–æ–¥—É –∑–∞ —Ä–µ–±—ë–Ω–∫–æ–º',\n  'educational': 'üìö –£—á–µ–±–Ω—ã–π'\n};\n\nconst availabilityMap = {\n  'unavailable': '‚ùå –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω',\n  'phone_only': 'üì± –¢–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω',\n  'phone_laptop': 'üíª –¢–µ–ª–µ—Ñ–æ–Ω –∏ –Ω–æ—É—Ç–±—É–∫'\n};\n\nconst requestId = `REQ_${Date.now()}`;\nconst dateStart = new Date(formData.date_start).toLocaleDateString('ru-RU');\nconst dateEnd = new Date(formData.date_end).toLocaleDateString('ru-RU');\n\nreturn {\n  json: {\n    user_id: userId,\n    start_message_id: startMessageId,\n    date_start: dateStart,\n    date_end: dateEnd,\n    date_start_raw: formData.date_start,\n    date_end_raw: formData.date_end,\n    vacation_type: typeMap[formData.vacation_type] || formData.vacation_type,\n    vacation_type_raw: formData.vacation_type,\n    availability: availabilityMap[formData.availability] || formData.availability,\n    availability_raw: formData.availability,\n    comment: formData.comment || '–ù–µ —É–∫–∞–∑–∞–Ω',\n    request_id: requestId\n  }\n};"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -640,
                96
            ],
            "id": "12345678",
            "name": "Parse Form Data"
        },
        {
            "parameters": {
                "resource": "user",
                "operation": "getById",
                "userId": "={{ $node[\"Parse Form Data\"].json.user_id }}"
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                304,
                96
            ],
            "id": "12345678",
            "name": "Get Use Info",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "jsCode": "// –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Get User Info (—Ç–µ–∫—É—â–∏–π input)\nconst userData = $input.item.json;\n\n// –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∏–∑ Save Confirmation Message ID (—á–µ—Ä–µ–∑ $node)\nconst formData = $node[\"Save Confirmation Message ID\"].json;\n\n// –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ\nreturn {\n  json: {\n    // –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã\n    user_id: formData.user_id,\n    date_start: formData.date_start,\n    date_end: formData.date_end,\n    date_start_raw: formData.date_start_raw,\n    date_end_raw: formData.date_end_raw,\n    vacation_type: formData.vacation_type,\n    vacation_type_raw: formData.vacation_type_raw,\n    availability: formData.availability,\n    availability_raw: formData.availability_raw,\n    comment: formData.comment,\n    request_id: formData.request_id,\n    confirmation_message_id: formData.confirmation_message_id, // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û\n    \n    // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ API\n    first_name: userData.first_name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',\n    last_name: userData.last_name || '',\n    nickname: userData.nickname || '',\n    email: userData.email || '–ù–µ —É–∫–∞–∑–∞–Ω',\n    department: userData.department || '–ù–µ —É–∫–∞–∑–∞–Ω'\n  }\n};"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                544,
                96
            ],
            "id": "12345678",
            "name": "Merge User Data"
        },
        {
            "parameters": {
                "entityId": 12345678,
                "content": "=üìã **–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫ –æ—Ç @{{ $json.nickname }}**\n\n**–ó–∞—è–≤–∫–∞:** {{ $json.request_id }}\n\nüë§ **–°–æ—Ç—Ä—É–¥–Ω–∏–∫:** {{ $json.first_name }} {{ $json.last_name }} (@{{ $json.nickname }})\nüè¢ **–û—Ç–¥–µ–ª**: {{ $json.department }}\n\n**–î–∞—Ç—ã:** {{ $json.date_start }} ‚Üí {{ $json.date_end }}\n**–¢–∏–ø:** {{ $json.vacation_type }}\n**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** {{ $json.availability }}\n**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** {{ $json.comment }}",
                "buttons": {
                    "button": [
                        {
                            "text": "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å",
                            "data": "=approve_{{ $json.user_id }}_{{ $json.request_id }}_{{ $json.confirmation_message_id }}"
                        },
                        {
                            "text": "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å",
                            "data": "=reject_{{ $json.user_id }}_{{ $json.request_id }}_{{ $json.confirmation_message_id }}"
                        },
                        {
                            "text": "‚ùì –£—Ç–æ—á–Ω–∏—Ç—å",
                            "data": "=clarify_{{ $json.user_id }}_{{ $json.request_id }}_{{ $json.confirmation_message_id }}"
                        }
                    ]
                }
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                784,
                96
            ],
            "id": "12345678",
            "name": "Send to HR Chat",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "jsCode": "// –ü–æ–ª—É—á–∞–µ–º ID —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ Confirm to User\nconst confirmationMessageId = $input.item.json.id;\n\n// –ë–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Parse Form Data\nconst formData = $node[\"Parse Form Data\"].json;\n\n// –û–±—ä–µ–¥–∏–Ω—è–µ–º\nreturn {\n  json: {\n    ...formData,\n    confirmation_message_id: confirmationMessageId\n  }\n};"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                64,
                96
            ],
            "id": "12345678",
            "name": "Save Confirmation Message ID"
        },
        {
            "parameters": {
                "entityType": "user",
                "entityId": "={{ $json.body.user_id }}",
                "content": "–ü—Ä–∏–≤–µ—Ç! üëã\n\n–î–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ:",
                "buttons": {
                    "button": [
                        {
                            "text": "‚úèÔ∏è –ó–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫",
                            "data": "vacation_request"
                        }
                    ]
                }
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                -640,
                -288
            ],
            "id": "12345678",
            "name": "Start Message",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "resource": "form",
                "formBuilderMode": "builder",
                "formTitle": "–ó–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫",
                "submitText": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É",
                "formBlocks": {
                    "block": [
                        {
                            "type": "plain_text",
                            "text": "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫"
                        },
                        {
                            "type": "date",
                            "name": "date_start",
                            "label": "–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ—Ç–ø—É—Å–∫–∞",
                            "required": true
                        },
                        {
                            "type": "date",
                            "name": "date_end",
                            "label": "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ—Ç–ø—É—Å–∫–∞",
                            "required": true
                        },
                        {
                            "type": "divider"
                        },
                        {
                            "type": "select",
                            "name": "vacation_type",
                            "label": "–¢–∏–ø –æ—Ç–ø—É—Å–∫–∞",
                            "required": true,
                            "options": {
                                "option": [
                                    {
                                        "text": "üí∞ –ï–∂–µ–≥–æ–¥–Ω—ã–π –æ–ø–ª–∞—á–∏–≤–∞–µ–º—ã–π –æ—Ç–ø—É—Å–∫",
                                        "value": "annual"
                                    },
                                    {
                                        "text": "üö´ –ë–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã",
                                        "value": "unpaid"
                                    },
                                    {
                                        "text": "ü§∞üèº –ü–æ —É—Ö–æ–¥—É –∑–∞ —Ä–µ–±—ë–Ω–∫–æ–º",
                                        "value": "parental"
                                    },
                                    {
                                        "text": "üìö –£—á–µ–±–Ω—ã–π",
                                        "value": "educational"
                                    }
                                ]
                            }
                        },
                        {
                            "type": "radio",
                            "name": "availability",
                            "label": "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—É—Å–∫–∞",
                            "required": true,
                            "options": {
                                "option": [
                                    {
                                        "text": "–ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω",
                                        "value": "unavailable",
                                        "description": "–ù–µ –±—É–¥—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∑–≤–æ–Ω–∫–∏"
                                    },
                                    {
                                        "text": "–¢–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω",
                                        "value": "phone_only",
                                        "description": "–ë—É–¥—É –æ—Ç–≤–µ—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ä–æ—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏"
                                    },
                                    {
                                        "text": "–¢–µ–ª–µ—Ñ–æ–Ω –∏ –Ω–æ—É—Ç–±—É–∫",
                                        "value": "phone_laptop",
                                        "description": "–ë—É–¥—É –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤–∞–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤"
                                    }
                                ]
                            }
                        },
                        {
                            "type": "input",
                            "name": "comment",
                            "label": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
                            "multiline": true
                        }
                    ]
                },
                "triggerId": "={{ $json.trigger_id }}",
                "privateMetadata": "={{ $json.start_message_id }}",
                "callbackId": "vacation_form"
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                -416,
                -96
            ],
            "id": "12345678",
            "name": "Create & open form view",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "resource": "thread",
                "threadMessageId": "={{ $json.start_message_id }}"
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                -416,
                96
            ],
            "id": "12345678",
            "name": "Create Thread from Start Message",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "jsCode": "// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ webhook\nconst webhookData = $input.item.json.body;\nconst buttonData = webhookData.data;\n\n// –ü–∞—Ä—Å–∏–º data –∫–Ω–æ–ø–∫–∏: \"approve_44351_REQ_1737923456789_755091234\"\nconst parts = buttonData.split('_');\nconst action = parts[0];\nconst userId = parts[1];\nconst requestId = parts.slice(2, -1).join('_'); // ‚Üê –ò–ó–ú–ï–ù–ï–ù–û\nconst confirmationMessageId = parts[parts.length - 1]; // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û\n\n// –ú–∞–ø–ø–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π\nconst actionMap = {\n  'approve': {\n    emoji: '‚úÖ',\n    text: '–û–¥–æ–±—Ä–µ–Ω–æ',\n    userMessage: '–í–∞—à–∞ –∑–∞—è–≤–∫–∞ {requestId} –±—ã–ª–∞ –æ–¥–æ–±—Ä–µ–Ω–∞! üéâ'\n  },\n  'reject': {\n    emoji: '‚ùå',\n    text: '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ',\n    userMessage: '–í–∞—à–∞ –∑–∞—è–≤–∫–∞ {requestId} –±—ã–ª–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.'\n  },\n  'clarify': {\n    emoji: '‚ùì',\n    text: '–¢—Ä–µ–±—É—é—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏—è',\n    userMessage: '–ü–æ –≤–∞—à–µ–π –∑–∞—è–≤–∫–µ {requestId} —Ç—Ä–µ–±—É—é—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏—è.'\n  }\n};\n\n// –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ HR (–∫—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É)\nconst hrUserId = webhookData.user_id;\nconst hrName = webhookData.user?.first_name || 'HR';\n\nreturn {\n  json: {\n    action: action,\n    user_id: parseInt(userId),\n    request_id: requestId,\n    confirmation_message_id: parseInt(confirmationMessageId), // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û\n    hr_user_id: hrUserId,\n    hr_name: hrName,\n    action_emoji: actionMap[action].emoji,\n    action_text: actionMap[action].text,\n    user_message: actionMap[action].userMessage.replace('{requestId}', requestId)\n  }\n};"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -640,
                304
            ],
            "id": "12345678",
            "name": "Parse HR Action"
        },
        {
            "parameters": {
                "entityType": "thread",
                "entityId": "={{ $node[\"Get Message Info\"].json.entity_id }}",
                "content": "=@{{ $node[\"Get a User\"].json.nickname }} üå¥\n**–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫:** {{ $node[\"Parse HR Action\"].json.action_text }}\n\n{{ $node[\"Parse HR Action\"].json.user_message }}\n\n// @HR @–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏"
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                64,
                304
            ],
            "id": "12345678",
            "name": "Send a message",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "resource": "user",
                "operation": "getById",
                "userId": "={{ $node[\"Parse HR Action\"].json.user_id }}"
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                -176,
                304
            ],
            "id": "12345678",
            "name": "Get a User",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        },
        {
            "parameters": {
                "jsCode": "// –ü–æ–ª—É—á–∞–µ–º webhook –æ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ \"Open Form\"\nconst webhookData = $input.item.json.body;\n\n// ID —Å–æ–æ–±—â–µ–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—ã–ª–∞ –∫–Ω–æ–ø–∫–∞ (Start Message)\nconst startMessageId = webhookData.message_id;\nconst triggerId = webhookData.trigger_id;\n\nreturn {\n  json: {\n    start_message_id: startMessageId,\n    trigger_id: triggerId\n  }\n};"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -640,
                -96
            ],
            "id": "12345678",
            "name": "Get Start Message ID"
        },
        {
            "parameters": {
                "operation": "getById",
                "messageId": "={{ $json.confirmation_message_id }}"
            },
            "type": "n8n-nodes-pachca.pachca",
            "typeVersion": 1,
            "position": [
                -416,
                304
            ],
            "id": "12345678",
            "name": "Get Message Info",
            "credentials": {
                "pachcaApi": {
                    "id": "12345678",
                    "name": "12345678"
                }
            }
        }
    ],
    "pinData": {},
    "connections": {
        "Webhook": {
            "main": [
                [
                    {
                        "node": "Switch",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Switch": {
            "main": [
                [
                    {
                        "node": "Start Message",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Get Start Message ID",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Parse Form Data",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Parse HR Action",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Confirm to User": {
            "main": [
                [
                    {
                        "node": "Save Confirmation Message ID",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Parse Form Data": {
            "main": [
                [
                    {
                        "node": "Create Thread from Start Message",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Get Use Info": {
            "main": [
                [
                    {
                        "node": "Merge User Data",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Merge User Data": {
            "main": [
                [
                    {
                        "node": "Send to HR Chat",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Save Confirmation Message ID": {
            "main": [
                [
                    {
                        "node": "Get Use Info",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Start Message": {
            "main": [
                []
            ]
        },
        "Create Thread from Start Message": {
            "main": [
                [
                    {
                        "node": "Confirm to User",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Parse HR Action": {
            "main": [
                [
                    {
                        "node": "Get Message Info",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Get a User": {
            "main": [
                [
                    {
                        "node": "Send a message",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Get Start Message ID": {
            "main": [
                [
                    {
                        "node": "Create & open form view",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Get Message Info": {
            "main": [
                [
                    {
                        "node": "Get a User",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "active": true,
    "settings": {
        "executionOrder": "v1"
    },
    "versionId": "12345678",
    "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "12345678"
    },
    "id": "12345678",
    "tags": []
}